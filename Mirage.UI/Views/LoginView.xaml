<mah:MetroWindow x:Class="Mirage.UI.Views.LoginView"
                 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                 xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
                 xmlns:viewModels="clr-namespace:Mirage.UI.ViewModels"
                 xmlns:converters="clr-namespace:Mirage.UI.Converters"
                 mc:Ignorable="d"
                 Title="Login - Portal Mirage" Height="450" Width="800"
                 WindowStartupLocation="CenterScreen"
                 WindowStyle="None" ResizeMode="NoResize">

    <mah:MetroWindow.Resources>
        <ResourceDictionary>
            <converters:StringIsNullOrEmptyToVisibilityConverter x:Key="StringIsNullOrEmptyToVisibilityConverter"/>
            <converters:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
        </ResourceDictionary>
    </mah:MetroWindow.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="0" Background="#F0F4F8">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <Image Source="/Assets/logo 2023.png" Width="250" Margin="10"/>
                <TextBlock Text="Portal Mirage" FontSize="32" FontWeight="Bold" Foreground="#005A9C" HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>

        <Grid Grid.Column="1">
            <StackPanel Width="300" 
                        HorizontalAlignment="Center" 
                        VerticalAlignment="Center"
                        IsEnabled="{Binding IsLoginInProgress, Converter={StaticResource InverseBooleanConverter}}">
                <TextBlock Text="Welcome Back" FontSize="28" FontWeight="Light" Margin="0,0,0,20"/>
                <TextBox mah:TextBoxHelper.Watermark="Username" Margin="0,10" FontSize="16"
                         Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}">
                    <TextBox.InputBindings>
                        <KeyBinding Key="Enter" Command="{Binding LoginCommand}" CommandParameter="{Binding ElementName=PasswordBox}" />
                    </TextBox.InputBindings>
                </TextBox>

                <PasswordBox x:Name="PasswordBox" mah:TextBoxHelper.Watermark="Password" Margin="0,10" FontSize="16">
                    <PasswordBox.InputBindings>
                        <KeyBinding Key="Enter" Command="{Binding LoginCommand}" CommandParameter="{Binding ElementName=PasswordBox}" />
                    </PasswordBox.InputBindings>
                </PasswordBox>
                <Button Content="Login" Margin="0,20" Padding="10" FontSize="18" FontWeight="Bold" Background="#0078D7" Foreground="White"
                        Command="{Binding LoginCommand}"
                        CommandParameter="{Binding ElementName=PasswordBox}"/>
                <TextBlock Text="{Binding ErrorMessage}" Foreground="Red" TextAlignment="Center" TextWrapping="Wrap"
                           Visibility="{Binding ErrorMessage, Converter={StaticResource StringIsNullOrEmptyToVisibilityConverter}, ConverterParameter=Inverse}"/>
            </StackPanel>

            <mah:ProgressRing IsActive="{Binding IsLoginInProgress}" />
        </Grid>
    </Grid>
</mah:MetroWindow>